<!DOCTYPE html>
<html>
<head lang="en">
	<meta charset="utf-8">
	<title>Example #1</title>
	<link rel="stylesheet" href="main.css" />
	<script src="../../vendor/web-animations-js/web-animations-next.min.js"></script>
	<script src="../../dist/js/morph.js"></script>
	<style>
		.g-hidden {
			display: none !important;
		}
	</style>
</head>
<body>

<div></div>


<div class="pages js-pages">

	<div class="page _list js-page-list">
		<div class="page__header js-page-header">
			<span class="page__header__title"><span class="js-page-title">Список</span></span>
		</div>
		<div class="page__body js-page-body">
			<ul>
				<li class="js-page-link"><span class="link" data-link-for="element1"><b>Элемент 1</b></span></li>
				<li class="js-page-link"><span class="link" data-link-for="element2"><b>Элемент 2</b></span></li>
				<li class="js-page-link"><span class="link" data-link-for="element3"><b>Элемент 3</b></span></li>
				<li class="js-page-link"><span class="link" data-link-for="element4"><b>Элемент 4</b></span></li>
				<li class="js-page-link"><span class="link" data-link-for="element5"><b>Элемент 5</b></span></li>
				<li class="js-page-link"><span class="link" data-link-for="element6"><b>Элемент 6</b></span></li>
				<li class="js-page-link"><span class="link" data-link-for="element7"><b>Элемент 7</b></span></li>
				<li class="js-page-link"><span class="link" data-link-for="element8"><b>Элемент 8</b></span></li>
				<li class="js-page-link"><span class="link" data-link-for="element9"><b>Элемент 9</b></span></li>
				<li class="js-page-link"><span class="link" data-link-for="element10"><b>Элемент 10</b></span></li>
				<li class="js-page-link"><span class="link" data-link-for="element11"><b>Элемент 11</b></span></li>
				<li class="js-page-link"><span class="link" data-link-for="element12"><b>Элемент 12</b></span></li>
				<li class="js-page-link"><span class="link" data-link-for="element13"><b>Элемент 13</b></span></li>
				<li class="js-page-link"><span class="link" data-link-for="element14"><b>Элемент 14</b></span></li>
				<li class="js-page-link"><span class="link" data-link-for="element15"><b>Элемент 15</b></span></li>
				<li class="js-page-link"><span class="link" data-link-for="element16"><b>Элемент 16</b></span></li>
				<li class="js-page-link"><span class="link" data-link-for="element17"><b>Элемент 17</b></span></li>
				<li class="js-page-link"><span class="link" data-link-for="element18"><b>Элемент 18</b></span></li>
				<li class="js-page-link"><span class="link" data-link-for="element19"><b>Элемент 19</b></span></li>
				<li class="js-page-link"><span class="link" data-link-for="element20"><b>Элемент 20</b></span></li>
				<li class="js-page-link"><span class="link" data-link-for="element21"><b>Элемент 21</b></span></li>
				<li class="js-page-link"><span class="link" data-link-for="element22"><b>Элемент 22</b></span></li>
				<li class="js-page-link"><span class="link" data-link-for="element23"><b>Элемент 23</b></span></li>
				<li class="js-page-link"><span class="link" data-link-for="element24"><b>Элемент 24</b></span></li>
				<li class="js-page-link"><span class="link" data-link-for="element25"><b>Элемент 25</b></span></li>
			</ul>
		</div>
	</div>

	<div class="page _detailed g-hidden js-page-detailed">
		<div class="page__header js-page-header">
			<button class="page__header__back-btn js-page-back-button">Список</button>
			<span class="page__header__title"><span class="js-page-title"></span></span>
		</div>
		<div class="page__body js-page-body">
			<div style="padding: 20px">
				Впечатление, несмотря на то, что все эти характерологические черты отсылают не к единому образу нарратора, параллельно. Басня дает строфоид. Тавтология осознаёт музыкальный возврат к стереотипам, поэтому никого не удивляет, что в финале порок наказан.
			</div>
		</div>
	</div>

</div>


<script>
	window.addEventListener('load', function() {
		/*console.time('adding');
		var a = document.createElement('div');

		document.body.appendChild(a);

		var styles = window.getComputedStyle(a);

		for (var i = 0, len = styles.length; i < len; i ++) {
			var prop = styles[i];
			console.log(prop, ':', styles[prop]);
		}

		console.timeEnd('adding');*/


		var pagesCover = document.querySelector('.js-pages');

		var pageList = document.querySelector('.js-page-list');
		var pageListLinks = pageList.querySelectorAll('.link');

		var pageDetailed = document.querySelector('.js-page-detailed');
		var pageDetailedBackButton = pageDetailed.querySelector('.js-page-back-button');
		var pageDetailedTitle = pageDetailed.querySelector('.js-page-title');

		var duration = 300;

		var detailedPageId;

		Array.prototype.slice.apply(pageListLinks).forEach(function(pageListLink, i){
			pageListLink.addEventListener('click', function(){
				pageDetailedTitle.textContent = pageListLink.textContent;
				detailedPageId = pageListLink.dataset.linkFor;

				/*new Morph(
					{ el: pageList, classHidden: 'g-hidden' },
					{ el: pageDetailed, classHidden: 'g-hidden' },
					{

					}
				);*/

				new Morph({
					src: {
						el: pageList,
						classHidden: 'g-hidden'
					},
					dist: {
						el: pageDetailed,
						classHidden: 'g-hidden'
					},
					type: 'move',
					context: pagesCover,
					duration: duration,
					partials: [
						{ src: '.js-page-header', dist: '.js-page-header' },
						{ src: '.js-page-title', dist: '.js-page-back-button' },
						{ src: '.js-page-body', dist: '.js-page-body' },
						/*{
							src: {
								el: '.js-page-body',
								styles: {
									transform: 'translateX(-100%)',
									opacity: 0
								}
							},
							dist: {
								//el: '.js-page-body',
								styles: {
									transform: 'translateX(100%)',
									opacity: 0
								}
							}
						},*/
						//{ from: '.js-page-link:nth-child(' + (i + 1) + ') span b', to: '.js-page-title' },
						/*{
							dist: {
								el: '.js-page-title',
								styles: {
									src: {
										transform: 'translateX(100%)',
										opacity: 0
									},
									dist: {
										transform: 'translateX(0)',
										opacity: 1
									}
								}
							}
						}*/
					]/*,
					context: pagesCover*/
				}).animate();
			});
		});

		pageDetailedBackButton.addEventListener('click', function(){
			new Morph({
				src: {
					el: pageDetailed,
					classHidden: 'g-hidden'
				},
				dist: {
					el: pageList,
					classHidden: 'g-hidden'
				},
				type: 'move',
				context: pagesCover,
				duration: duration,
				partials: [
					{ src: '.js-page-header', dist: '.js-page-header' },

					/*{ src: '.js-page-header', dist: {
						styles:
					} },*/



					//{ from: '.js-page-title', to: '.js-page-link span[data-link-for="' + detailedPageId + '"] b' },
					/*{
						src: {
							el: '.js-page-title',
							styles: {
								src: {
									transform: 'translateX(0)',
									opacity: 1
								},
								dist: {
									transform: 'translateX(100%)',
									opacity: 0
								}
							}
						}
					},*/
					/*{
						src: {
							el: '.js-page-body',
							styles: {
								src: {
									transform: 'translateX(0)',
									opacity: 1
								},
								dist: {
									transform: 'translateX(100%)',
									opacity: 0
								}
							}
						},
						dist: {
							el: '.js-page-body',
							styles: {
								src: {
									transform: 'translateX(-100%)',
									opacity: 0
								},
								dist: {
									transform: 'translateX(0)',
									opacity: 1
								}
							}
						}
					},*/
					{ src: '.js-page-body', dist: '.js-page-body', effect: 'slideRight' },
					{ src: '.js-page-back-button', dist: '.js-page-title' },
				]
			}).animate();
		});
	});
</script>

</body>
</html>